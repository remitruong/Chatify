(function(e){function t(t){for(var r,o,i=t[0],c=t[1],l=t[2],h=0,p=[];h<i.length;h++)o=i[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("router-view")],1)],1)},s=[],o={name:"App",data:function(){return{}}},i=o,c=a("2877"),l=a("6544"),u=a.n(l),h=a("7496"),p=a("a75b"),v=Object(c["a"])(i,n,s,!1,null,null,null),d=v.exports;u()(v,{VApp:h["a"],VContent:p["a"]});var m=a("f309");r["a"].use(m["a"]);var f=new m["a"]({icons:{iconfont:"mdi"}}),g=a("bc3a"),b=a.n(g),k=a("a7fe"),x=a.n(k),y=a("8c4f"),_=(a("d1e7"),a("00e7")),w=a.n(_),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-snackbar",{attrs:{top:!0,color:"error"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.errorMessage)+"\n      "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n        Close\n      ")])],1),e.changeForm?e._e():a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Join")]),a("div",{staticClass:"flex-grow-1"}),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:"",large:"",href:"",target:"_blank"},on:{click:e.setChangeForm}},r),[a("v-icon",[e._v("add")])],1)]}}],null,!1,754869130)},[a("span",[e._v("Create a new chat")])])],1),a("v-card-text",[a("v-form",{model:{value:e.validJoin,callback:function(t){e.validJoin=t},expression:"validJoin"}},[a("v-text-field",{attrs:{label:"Username",name:"username","prepend-icon":"person",type:"text",rules:e.usernameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{id:"chatID",label:"Chat ID",name:"chatID","prepend-icon":"lock",type:"text",rules:e.chatIDRules},model:{value:e.chatID,callback:function(t){e.chatID=t},expression:"chatID"}})],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary",disabled:!e.validJoin},on:{click:function(t){return e.join()}}},[e._v("Join")])],1)],1)],1)],1)],1),e.changeForm?a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Create")]),a("div",{staticClass:"flex-grow-1"}),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-btn",e._g({attrs:{icon:"",large:"",href:"",target:"_blank"},on:{click:e.setChangeForm}},r),[a("v-icon",[e._v("chat")])],1)]}}],null,!1,1999114773)},[a("span",[e._v("Join a chat")])])],1),a("v-card-text",[a("v-form",{model:{value:e.validCreate,callback:function(t){e.validCreate=t},expression:"validCreate"}},[a("v-text-field",{attrs:{id:"username",label:"Username",name:"username","prepend-icon":"person",type:"text",rules:e.usernameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[e._v("\n                >")]),a("v-text-field",{attrs:{id:"chatName",label:"Chat Name",name:"chatName","prepend-icon":"edit",type:"text",rules:e.chatNameRules},model:{value:e.chatName,callback:function(t){e.chatName=t},expression:"chatName"}},[e._v("\n                >")])],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary",disabled:!e.validCreate},on:{click:function(t){return e.create()}}},[e._v("Create")])],1)],1)],1)],1)],1):e._e()],1)],1)},I=[],V=(a("96cf"),a("3b8d")),$={data:function(){return{changeForm:!1,snackbar:!1,errorMessage:"",id:"",chatID:"",chatName:"",username:"",validJoin:!1,validCreate:!1,usernameRules:[function(e){return!!e||"Username is required"}],chatIDRules:[function(e){return!!e||"Chat ID is required"}],chatNameRules:[function(e){return!!e||"Chat Name is required"}]}},methods:{join:function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post(this.$apiURL+"/api/join/",{chatID:this.chatID,username:this.username});case 3:t=e.sent,0===t.data.error?(this.$cookie.set("username",this.username,1),this.$cookie.set("chatID",this.chatID,1),this.$cookie.set("chatName",t.data.chatName,1),this.$router.push({name:"chat",params:{chatID:this.chatID}})):(this.snackbar=!0,this.errorMessage=t.data.message),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.snackbar=!0,this.errorMessage=this.$genericErrorMessage;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),create:function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post(this.$apiURL+"/api/create/",{username:this.username,chatName:this.chatName});case 3:t=e.sent,0===t.data.error?(this.chatID=t.data.chatID,this.$cookie.set("username",this.username,1),this.$cookie.set("chatID",this.chatID,1),this.$router.push({name:"chat",params:{chatID:this.chatID}})):(this.snackbar=!0,this.errorMessage=t.data.message),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.snackbar=!0,this.errorMessage=this.$genericErrorMessage;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),setChangeForm:function(){this.changeForm=!this.changeForm}}},D=$,M=a("8336"),R=a("b0af"),j=a("99d9"),N=a("62ad"),O=a("a523"),L=a("4bd4"),T=a("132d"),S=a("0fd9"),E=a("2db4"),F=a("8654"),P=a("71d9"),U=a("2a7f"),J=a("3a2f"),A=Object(c["a"])(D,C,I,!1,null,null,null),B=A.exports;u()(A,{VApp:h["a"],VBtn:M["a"],VCard:R["a"],VCardActions:j["a"],VCardText:j["b"],VCol:N["a"],VContainer:O["a"],VContent:p["a"],VForm:L["a"],VIcon:T["a"],VRow:S["a"],VSnackbar:E["a"],VTextField:F["a"],VToolbar:P["a"],VToolbarTitle:U["a"],VTooltip:J["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:""}},[a("v-flex",{staticStyle:{position:"relative"}},[a("v-app-bar",{attrs:{app:"","clipped-right":"",color:"blue-grey",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",[e._v(e._s(e.chatName))]),a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",dark:""},on:{click:function(t){return e.logout()}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("exit_to_app")]),e._v("Logout\n      ")],1)],1),a("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",e._l(e.users,(function(t,r){return a("v-list-item",{key:r},[a("v-icon",[e._v("account_circle")]),a("v-spacer"),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1)],1),a("v-navigation-drawer",{attrs:{fixed:"",temporary:""}}),a("div",{staticClass:"chat-container"},[a("v-list",e._l(e.messages,(function(t,r){return a("v-list-item",{key:r,staticClass:"message",class:[t.username==e.session.user.name?"own":"user"]},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"username",domProps:{textContent:e._s(t.username)}}),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on;return[a("v-list-item",e._g({staticClass:"content",domProps:{textContent:e._s(t.content)}},n))]}}],null,!0)},[a("span",{domProps:{textContent:e._s(t.send_time)}})])],1)],1)})),1)],1),a("div",{staticClass:"typebox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{type:"text",placeholder:"Ecrire un message..."},domProps:{value:e.content},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},input:function(t){t.target.composing||(e.content=t.target.value)}}}),a("v-btn",{staticClass:"btnMsg",attrs:{color:"blue darken-3",dark:""},on:{click:function(t){return e.sendMessage()}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("message")]),e._v("Send\n      ")],1)],1)],1)],1)},H=[],W=a("8055"),z=a.n(W),G={data:function(){return{drawer:null,errorMessage:"",chatName:this.$cookie.get("chatName"),users:this.getUsers(),messages:this.getMessages(),socket:z.a.connect(this.$socketURL,{query:"chatID="+this.$cookie.get("chatID")}),content:""}},methods:{getMessages:function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post(this.$apiURL+"/api/messages/",{chatID:this.$cookie.get("chatID"),username:this.$cookie.get("username")});case 3:t=e.sent,0===t.data.error?(this.messages=t.data.messages,this.session=t.data.session):(this.snackbar=!0,this.errorMessage=t.data.message),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.snackbar=!0,this.errorMessage=this.$genericErrorMessage;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),getUsers:function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post(this.$apiURL+"/api/users/",{chatID:this.$cookie.get("chatID")});case 3:t=e.sent,0===t.data.error?this.users=t.data.users:(this.snackbar=!0,this.errorMessage=t.data.message),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.snackbar=!0,this.errorMessage=this.$genericErrorMessage;case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),sendMessage:function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.socket.emit("chat-message",{chatID:this.$cookie.get("chatID"),username:this.$cookie.get("username"),content:this.content,send_time:new Date}),this.content="";case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),logout:function(){this.$cookie.delete("username"),this.$cookie.delete("chatID"),this.$cookie.delete("chatName"),this.$router.push({name:"index"})}},mounted:function(){var e=this;this.socket.on("message",(function(t){e.messages.push(t)}))}},K=G,Q=(a("f196"),a("40dc")),X=a("5bc1"),Y=a("0e8f"),Z=a("a722"),ee=a("8860"),te=a("da13"),ae=a("5d23"),re=a("f774"),ne=a("2fa4"),se=Object(c["a"])(K,q,H,!1,null,null,null),oe=se.exports;u()(se,{VAppBar:Q["a"],VAppBarNavIcon:X["a"],VBtn:M["a"],VFlex:Y["a"],VIcon:T["a"],VLayout:Z["a"],VList:ee["a"],VListItem:te["a"],VListItemContent:ae["a"],VListItemTitle:ae["b"],VNavigationDrawer:re["a"],VSpacer:ne["a"],VToolbarTitle:U["a"],VTooltip:J["a"]});var ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticStyle:{height:"calc(100vh - 58px)"},attrs:{"fill-height":""}},[a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{attrs:{"text-center":""}},[a("h1",{staticClass:"display-2 primary--text"},[e._v("Whoops, 404")]),a("p",[e._v("The page you were looking for does not exist")]),a("router-link",{attrs:{to:"/",tag:"v-btn"}},[a("v-btn",{attrs:{outlined:"",color:"primary",flat:"",value:"feed"}},[a("span",[e._v("Home")])])],1)],1)],1)],1)},ce=[],le={name:"pagenotfound",data:function(){return{url:"http://localhost:4000"}}},ue=le,he=Object(c["a"])(ue,ie,ce,!1,null,null,null),pe=he.exports;u()(he,{VBtn:M["a"],VContainer:O["a"],VFlex:Y["a"],VLayout:Z["a"]});var ve=[{path:"/",name:"index",component:B},{path:"/chat/:chatID",name:"chat",component:oe},{path:"*",name:"pagenotfound",component:pe}];r["a"].use(w.a),r["a"].use(y["a"]);var de=new y["a"]({routes:ve});r["a"].config.productionTip=!1,b.a.defaults.withCredentials=!0,r["a"].use(x.a,b.a),r["a"].prototype.$apiURL="http://127.0.0.1:4000",r["a"].prototype.$socketURL="http://127.0.0.1:4444",r["a"].prototype.$genericErrorMessage="Error, try again !",new r["a"]({vuetify:f,router:de,render:function(e){return e(d)}}).$mount("#app")},9574:function(e,t,a){},f196:function(e,t,a){"use strict";var r=a("9574"),n=a.n(r);n.a}});
//# sourceMappingURL=app.bbf47ea5.js.map